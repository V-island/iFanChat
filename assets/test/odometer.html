<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Geolocation</title>
    <link rel="stylesheet" href="css/geo-html5.css">
</head>

<body onload="loadDemo()">
    <header>
        <h1>HTML5 计步器</h1>
    </header>
    <div id="container">
        <section>
            <article>
                <header>
                    <h1>当前位置：</h1>
                </header>
                <p class="info" id="status">Geolocation is not supported in your browser.</p>
                <div class="geostatus">
                    <p id="latitude">纬度: </p>
                    <p id="longitude">经度: </p>
                    <p id="accuracy">精确值: </p>
                    <p id="timestamp">时间戳: </p>
                </div>
            </article>
        </section>
        <footer>
            <h2>管住嘴，迈开腿，你不瘦谁瘦！Come on!</h2>
        </footer>
    </div>
    <script>
    function loadDemo() {

        if (navigator.geolocation) {
            document.getElementById("status").innerHTML = "HTML5 Geolocation is supported in your browser.";
            navigator.geolocation.watchPosition(updateLocation, handleLocationError, { timeout: 10000 });
            // console.log("Requesting Geolocation data")
        }
    }

    function updateLocation(position) {
        var latitude = position.coords.latitude;
        var longitude = position.coords.longitude;

        document.getElementById("latitude").innerHTML = "纬度: " + latitude;
        document.getElementById("longitude").innerHTML = "精度: " + longitude;

    }

    function handleLocationError(error) {
        switch (error.code) {
            case 0:
                console.log("There was an error while retrieving your location. Additional details: " + error.message);
                break;
            case 1:
                console.log("The user opted not to share his or her location.");
                break;
            case 2:
                console.log("The browser was unable to determine your location. Additional details: " + error.message);
                break;
            case 3:
                console.log("The browser timed out before retrieving the location.");
                break;
        }
    }
    </script>
</body>

</html>